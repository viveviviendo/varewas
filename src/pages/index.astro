---
// Server-side redirect - executes before any HTML is rendered
const supportedLangs = ['en', 'es', 'fr'];
const defaultLang = 'en';

// Get browser language from Accept-Language header
const acceptLanguage = Astro.request.headers.get('accept-language') || '';
const browserLang = acceptLanguage.split(',')[0].split('-')[0].toLowerCase();

// Use browser language if supported, otherwise default
const targetLang = supportedLangs.includes(browserLang) ? browserLang : defaultLang;

// Server-side redirect (happens before any HTML is sent)
return Astro.redirect(`/${targetLang}`);
---
